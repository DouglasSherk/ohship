<div class="page-heading row">
  <div class="col-md-8">
    <h2>Package Details</h2>
  </div>
</div>

<% unless flash[:error].nil? %>
  <div class="action-box alert alert-danger">
    Error: <%= raw flash[:error] %>
  </div>
<% end %>

<div class="action-box alert alert-warning">
  <%= render 'packages/' + (is_shipper? ? 'shipper' : 'shippee') +
             '_actions/' + @package.state_to_s %>
</div>

<dl class="dl-horizontal">
  <dt>Status</dt>
  <dd><b><%= @package.status(current_user.user_type) %></b></dd>

  <dt>Description</dt>
  <dd><%= @package.description %></dd>

  <dt>Value</dt>
  <dd><%= @package.value_cents.nil? ? '-' : sprintf('$%.02f', @package.value_cents/100.0) %></dd>

  <dt>Package dimensions</dt>
  <dd><%= @package.length_in %>in x <%= @package.width_in %>in <% if @package.is_envelope == 1 %>(envelope)<% else %>x <%= @package.height_in %>in<% end %></dd>

  <dt>Package weight</dt>
  <dd><%= @package.weight_lb %>lb</dd>

  <% if @package.shipping_class %>
    <dt>Requested shipping</dt>
    <dd><%= Package::SHIPPING_CLASSES[@package.shipping_class] %></dd>
  <% end %>

  <dt>Special instructions</dt>
  <dd><%= @package.special_instructions %></dd>
</dl>

<h3>Package will be sent to:</h3>

<dl class="dl-horizontal">
<% if is_shippee? || @package.state >= Package::STATE_SHIPPEE_PAID %>
  <dt>Name</dt>
  <dd><%= @package.ship_to_name %></dd>
  <dt>Address</dt>
  <dd><%= @package.ship_to_address %></dd>
<% else %>
  <div class="alert alert-info">
    <i>Full address details will be available once the shippee has made the payment.</i>
  </div>
<% end %>
  <dt>City</dt>
  <dd><%= @package.ship_to_city %></dd>
  <dt>State/Province</dt>
  <dd><%= @package.ship_to_state %></dd>
  <dt>Country</dt>
  <dd><%= @package.ship_to_country %></dd>
  <dt>Zip/Postal Code</dt>
  <dd><%= @package.ship_to_postal_code %></dd>
</dl>
